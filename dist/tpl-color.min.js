!function(){"use strict";angular.module("tpl.color",["tpl.scope-listener-manager"])}(),function(){"use strict";angular.module("tpl.color").service("tplColorService",["$document","$compile","$rootScope",function(a,b,c){function d(){angular.forEach(j,function(a){k[a]=null})}function e(d,e){k[d]=e,angular.forEach(m[e],function(a){a.remove()}),angular.forEach(l,function(e,f){angular.forEach(e,function(e,g){if(e===d){var h="<style>"+f+"{"+g+":"+k[e]+";}</style>",i=b(h)(c);a.find("head").append(i),m[e]||(m[e]=[]),m[e].push(i)}})})}function f(){return k}function g(){return j}function h(a,b,c){l[a]||(l[a]={}),l[a][b]=c}function i(a,b){l[a]&&l[a][b]&&(delete l[a][b],0===Object.keys(l[a])&&delete l[a])}var j=["primaryColor","secondaryColor","primaryFontColor","secondaryFontColor","tertiaryColor"],k={},l={},m={},n={setColor:e,getColors:f,getColorNames:g,addCssRule:h,removeCssRule:i};return d(),n}])}(),function(){"use strict";angular.module("tpl.color").directive("tplColor",["$timeout","$rootScope","scopeListenerManager","$compile","$document","tplColorService",function(a,b,c,d,e,f){return{link:function(g,h,i){var j,k,l,m=f.getColorNames(),n=i.tplColor.replace(/ /g,""),o=[];g.colors={};var p={primaryColor:[],secondaryColor:[],primaryFontColor:[],secondaryFontColor:[],tertiaryColor:[]},q={primaryColor:[],secondaryColor:[],primaryFontColor:[],secondaryFontColor:[],tertiaryColor:[]};c.saveAddListener(g,g.$watch("colors."+m[0],function(b){b&&o&&o.length>0&&(j(m[0]),a(function(){angular.forEach(o,function(a){a.color===m[0]&&k(a,b)})}))})),c.saveAddListener(g,g.$watch("colors."+m[1],function(b){b&&o&&o.length>0&&(j(m[2]),a(function(){angular.forEach(o,function(a){a.color===m[1]&&k(a,b)})}))})),c.saveAddListener(g,g.$watch("colors."+m[2],function(b){b&&o&&o.length>0&&(j(m[2]),a(function(){angular.forEach(o,function(a){a.color===m[2]&&k(a,b)})}))})),c.saveAddListener(g,g.$watch("colors."+m[3],function(b){b&&o&&o.length>0&&(j(m[3]),a(function(){angular.forEach(o,function(a){a.color===m[3]&&k(a,b)})}))})),c.saveAddListener(g,g.$watch("colors."+m[4],function(b){b&&o&&o.length>0&&(j(m[4]),a(function(){angular.forEach(o,function(a){a.color===m[4]&&k(a,b)})}))})),g.$on("$destroy",function(){j()});var r=function(){m=f.getColorNames(),g.colors=f.getColors(),angular.forEach(n.split(";"),function(a){for(var b={color:null,attribute:null,selector:null},c=a.split(":"),d=0;d<c.length;d++)c[d]&&(0===d?b.color=c[d]:1===d?b.attribute=c[d]:2===d&&(b.selector=c[d]));o.push(b)}),angular.forEach(o,function(a){a.color===m[0]&&k(a,b[m[0]]),a.color===m[1]&&k(a,b[m[1]]),a.color===m[2]&&k(a,b[m[2]]),a.color===m[3]&&k(a,b[m[3]])})};j=function(a){a?(angular.forEach(p[a],function(a){h.off(a),h.off(a)}),angular.forEach(q[a],function(a){a.remove()})):angular.forEach(m,function(a){angular.forEach(p[a],function(a){h.off(a),h.off(a)}),angular.forEach(q[a],function(a){a.remove()})})},k=function(a,b){if("hover"===a.selector)l(a,b);else if("active"===a.selector||"focus"===a.selector){var c=h.attr("id"),f=null,i=null;c||(c="x"+Math.random().toString(36).substring(7)),h.attr("id",c),"active"===a.selector?(f="<style>#"+c+".active {"+a.attribute+":"+b+";}</style>",i=d(f)(g)):"focus"===a.selector&&(f="<style>#"+c+":focus {"+a.attribute+":"+b+";}</style>",i=d(f)(g)),e.find("head").append(i),q[a.color].push(i)}else h.css(a.attribute,b)},l=function(a,b){var c=h.css(a.attribute);h.on("mouseenter.tpl-color",function(){h.css(a.attribute,b)}),p[a.color].push("mouseenter.tpl-color"),h.on("mouseleave.tpl-color",function(){h.css(a.attribute,c)}),p[a.color].push("mouseleave.tpl-color")},r()}}}])}();